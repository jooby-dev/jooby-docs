# Hour

This command is generated by the sensor and sent periodically without any request from the server when it is configured to provide hourly consumption data.
The command contains the complete pulse counter value for the specified hour and the hourly difference in readings, limited to `13` bits.

For hardware revisions `1`, `2`.


## Event

### Format

| Size  | Type                                                                                              | Field                                                                                 |
| ----- | ------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------- |
| `1`   | `uint8`                                                                                           | command id `0x40` + dynamic command size                                              |
| `2`   | [packed date](../../types.md#packed-date)                                                         | [date](#date)                                                                         |
| `1`   | [magnetic influence flag and hour](../../types.md#packed-magnetic-influence-and-hour)             | [packed info of magnet influence and time](#packed-info-of-magnet-influence-and-time) |
| `3`   | `uint8`                                                                                           | [counter value](#counter-value)                                                       |
| `2*n` | sequence of [magnetic influence flag and diff](../../types.md#packed-magnetic-influence-and-diff) | [packed info of magnet influence and diff](#packed-info-of-magnet-influence-and-diff) |

> `n` - the number of hour data diff values.

It's a command with a [one-bytes header](../../message.md#command-with-a-one-byte-header).

### Parameters

#### **date**

The command contains counter data for this date.
<br>
[See details](../../types.md#packed-date).

#### **packed info of magnet influence and time**

The magnetic influence bit flag indicates that there was a magnet intervention during the specified day.
<br>
The command contains counter data for this time.
<br>
[See details](../../types.md#packed-magnetic-influence-and-hour).

#### **counter value**

It's a pulse counter value for given date and time packed in `3` bytes.

#### **packed info of magnet influence and diff**

It's a sequence of [magnetic influence flag and diff](../../types.md#packed-magnetic-influence-and-diff).
<br>
[See details](../../types.md#packed-magnetic-influence-and-diff).

### Examples

| Field                            | Value                         | Bits                 | Hex        |
| -------------------------------- | ----------------------------- | -------------------- | ---------- |
| command id + command size        | `64` + `8`                    |                      | `0x48`     |
| date                             | `2023.12.23`                  | `0b0010111110010111` | `0x2f97`   |
| magnetic influence flag and hour | magnet: `true`, time: `12:00` | `0b10001100`         | `0x8c`     |
| counter value                    | `163`                         |                      | `0x0000a3` |
| diff 1                           | magnet: `true`, value: `10`   | `0b1000000000001010` | `0x800a`   |

Message hex dump with LRC: `48 2f 97 8c 00 00 a3 80 0a 00`


## See also

* [Packed date](../../types.md#packed-date)
* [Magnetic influence flag and hour](../../types.md#packed-magnetic-influence-and-hour)
* [Magnetic influence flag and diff](../../types.md#packed-magnetic-influence-and-diff)
