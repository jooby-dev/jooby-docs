# HourMC

This command is generated by the sensor and sent within a specified period without a request from the server when configured to issue hour consumption data.
The command contains the total value of the pulse counter for the specified hour and hourly difference, which is limited to `31-bit` size.


## Event

### Format

| Size   | Type                                            | Field                                               |
| ------ | ----------------------------------------------- | --------------------------------------------------- |
| `1`    | `byte`                                          | command id = `0x17`                                 |
| `1`    | `byte`                                          | command size (dynamic, `6+`)                        |
| `2`    | [packed date](../../types.md#packed-date)       | [date](#date)                                       |
| `1`    | [packed hours](../../types.md#packed-hours)     | [hours](#hours)                                     |
| `1..5` | [extended value](../../types.md#extended-value) | [channels bit set](../../types.md#channels-bit-set) |
| `1..5` | [extended value](../../types.md#extended-value) | channel `1` value                                   |
| `1..5` | [extended value](../../types.md#extended-value) | channel `1` diff `1`                                |
| `1..5` | [extended value](../../types.md#extended-value) | channel `1` diff `2`                                |
| `1..5` | [extended value](../../types.md#extended-value) | channel `2` value                                   |
| `1..5` | [extended value](../../types.md#extended-value) | channel `2` diff `1`                                |
| `1..5` | [extended value](../../types.md#extended-value) | channel `2` diff `2`                                |
| ...    | ...                                             | ...                                                 |
| `1..5` | [extended value](../../types.md#extended-value) | channel `N` value                                   |
| `1..5` | [extended value](../../types.md#extended-value) | channel `N` diff `1`                                |
| `1..5` | [extended value](../../types.md#extended-value) | channel `N` diff `2`                                |

It's a command with a [two-bytes header](../../message.md#command-with-a-two-bytes-header).

### Parameters

#### **date**

The command contains pulse counter of channels for this date.
<br>
[See details](../../types.md#packed-date).

#### **hours**

It`s full value of pulse counter with diff for each previous hours (8 hours if reporting data interval is set to 4 hours)
<br>
[See details](../../types.md#packed-hours).

#### **channels bit set**

[See details](../../types.md#channels-bit-set).

### Examples

#### channels `1`, `2`, `3`, `4`:

| Field             | Value                     | Bits                                                                    | Hex      |
| ----------------- | ------------------------- | ----------------------------------------------------------------------- | -------- |
| command id        | `23`                      |                                                                         | `0x17`   |
| command size      | `15`                      |                                                                         | `0x0f`   |
| date              | `2023.12.23 00:00:00 GMT` | `0b0010111110010111`                                                    | `0x2f97` |
| hours             | hour: `12:00`, hours: `1` | `0b00001100`                                                            | `0x0c`   |
| channels          | `1`, `2`, `3`, `4`        | `0b00001111` <br> the same with extended bits                           | `0x0f`   |
| channel `1` value | `131`                     | `0b0000000010000011` <br> with extended bits: <br> `0b0000000110000011` | `0x8301` |
| channel `1` diff  | `10`                      |                                                                         | `0x0a`   |
| channel `2` value | `832`                     | `0b0000001101000000` <br> with extended bits: <br> `0b0000011011000000` | `0xc006` |
| channel `2` diff  | `12`                      |                                                                         | `0x0c`   |
| channel `3` value | `38`                      |                                                                         | `0x26`   |
| channel `3` diff  | `8`                       |                                                                         | `0x08`   |
| channel `4` value | `234`                     | `0b0000000011101010` <br> with extended bits: <br> `0b0000000111101010` | `0xea01` |
| channel `4` diff  | `11`                      |                                                                         | `0x0b`   |

Message hex dump with LRC: `17 0f 2f 97 0c 0f 83 01 0a c0 06 0c 26 08 ea 01 0b 7a`


## See also

* [Packed date](../../types.md#packed-date)
* [Packed hours](../../types.md#packed-hours)
* [Extended value](../../types.md#extended-value)
* [Channels bit set](../../types.md#channels-bit-set)
